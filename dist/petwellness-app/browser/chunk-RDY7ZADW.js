import{a as J}from"./chunk-TBZYW4GU.js";import{a as z,b as N,n as E}from"./chunk-KRJFMCTB.js";import{$ as _,Aa as v,Ab as A,Bc as w,Cc as F,Db as l,Ec as U,Fb as h,Ib as j,Ob as p,Pb as u,Qb as V,Sa as y,Ta as R,Wa as s,Xa as f,_ as T,ea as k,ja as g,ka as P,mb as x,ob as d,ra as M,sa as O,xb as r,yb as c,zb as m}from"./chunk-MKVZASBW.js";var C=(()=>{let t=class t{constructor(){this.apiUrl=J.apiUrl,this.http=k(N)}getProducts(){let e=`${this.apiUrl}/productos`;return this.http.get(e)}getShops(){let e=`${this.apiUrl}/shop`;return this.http.get(e)}ShopRequest(e){let o=`${this.apiUrl}/shop`,a=new z({"Content-Type":"application/json"});return this.http.post(o,e,{headers:a})}removeProduct(e){let o=`${this.apiUrl}/shop/${e}`;return this.http.delete(o)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function D(n,t){if(n&1&&(r(0,"p",12)(1,"del"),p(2),c(),p(3),c()),n&2){let i=h().$implicit;s(2),u(i.precio.split(" ")[0]),s(),V(" ",i.precio.split(" ")[1]," ")}}function L(n,t){if(n&1&&(r(0,"p",12),p(1),c()),n&2){let i=h().$implicit;s(),u(i.precio)}}function Q(n,t){if(n&1){let i=A();r(0,"div",5),m(1,"img",6),r(2,"div",7)(3,"p"),p(4),c(),x(5,D,4,2,"p",8)(6,L,2,1,"p",8),c(),r(7,"div",9)(8,"button",10),l("click",function(){let o=M(i).$implicit,a=h();return O(a.addProductToCar(o))}),m(9,"img",11),c()()()}if(n&2){let i=t.$implicit;s(),d("src",i.img,y)("alt",i.nombre),s(3),u(i.nombre),s(),d("ngIf",i.precio.indexOf(" ")!==-1),s(),d("ngIf",i.precio.indexOf(" ")===-1)}}var K=(()=>{let t=class t{constructor(e){this.productoService=e,this.productos=[],this.message="",this.messageType=""}ngOnInit(){this.loadProducts()}loadProducts(){this.productoService.getProducts().subscribe(e=>{this.productos=e.map(o=>({img:o.img,nombre:o.nombre,precio:o.precio.toString()}))})}addProductToCar(e){let o={id:0,img:e.img,nombre:e.nombre,precio:e.precio};this.productoService.ShopRequest(o).subscribe({next:a=>{this.showMessage("Producto a\xF1adido exitosamente al carrito","success")},error:a=>{console.error("Error al a\xF1adir producto al carrito:",a),this.showMessage("Error al a\xF1adir producto al carrito. Por favor, intenta de nuevo.","error")}})}showMessage(e,o){this.message=e,this.messageType=o,setTimeout(()=>{this.message="",this.messageType=""},3e3)}};t.\u0275fac=function(o){return new(o||t)(f(C))},t.\u0275cmp=g({type:t,selectors:[["app-tienda"]],decls:8,vars:1,consts:[[1,"tienda"],[1,"dashboard"],[1,"dashboard-item","tiendita"],[1,"productos-list"],["class","producto-card",4,"ngFor","ngForOf"],[1,"producto-card"],[3,"src","alt"],[1,"appointment-details"],["class","price",4,"ngIf"],[1,"Cart"],[1,"add-to-car",3,"click"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFElEQVR4nO2ZPy8sURiHV6PBKvVULArRKCTiTxalREe1JBRXwwfYjyDccq8oRCE6ilXxBZSr9p+CYqlI7j5yYovJsWbPO+fsziHzJNPsnN95zzOZmXdONpVKSEhI+JUAXcAsMN+kY0bVdC2xAbzTfN6AdVcS40CF+KgAYy5EtoifTRciJyEFLoEJoA2YBK4Ei5NkT1yIlEIKTGhjpwQikmzJhUg5pECbNrZVINKqZdtDxpZtJdJ1FvPlITS1+OalEkbaRiQTOvXnfT1iK6LmAK7rRDI2ItMGazpwIHJgEMnaiOQMChxqGZOeU9EyhwaZnI1I3qDAqZZ5MMjca5kzg0zeRqRgUOAGaAlkdg0yO4HxLcCdQaZgI1LEjKFApqfOK1ud6w6MHzasUWxUMwyyp+VGgcca49Rvo9rYfcMaJRuRsCsb5L/qAzV60Kq6jarHCtChjZkUfJCWG9UMdZ6AAcH8g8CzsEa6Ec2wFi/AQvDhrzGvergXgdcI82eiiGSJzjnwB+irfkO1Vy/MWvVcVLJRRJbxj6VGNcNmk48i8g//KLjeGcZFMYrIBf5RiiKiXqW+8SKV6MRf0hKRfvwl43pnGBdZicgS/pL76c1Q3hQ9bYbypuhpM5Q3RU+bobwpCnaGcVCWiNzjL7cSkb/4y7ZEpAM4xj+O1G7TWCQg1AvMNfEP0PlvDrWGXrFAQkJCQspXPgCPvUshVraYkgAAAABJRU5ErkJggg=="],[1,"price"]],template:function(o,a){o&1&&(r(0,"div",0)(1,"main")(2,"div",1)(3,"section",2)(4,"h2"),p(5,"La Tiendita"),c(),r(6,"div",3),x(7,Q,10,5,"div",4),c()()()()()),o&2&&(s(7),d("ngForOf",a.productos))},dependencies:[w,F],styles:[".tiendita[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;color:#003049}.productos-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.producto-card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:#fff;padding:10px;border-radius:8px;flex:1 1 calc(50% - 20px)}.producto-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;object-fit:cover;margin-right:20px}.appointment-details[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;justify-content:center;margin-right:10px}.appointment-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#003049;font-weight:600}.appointment-details[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:14px;color:#726c6c;font-weight:400}.producto-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#54afb2;color:#fff;border:none;padding:8px 10px;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center}.producto-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#003049}.producto-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding-left:20px;width:24px;height:24px}.price[_ngcontent-%COMP%]   del[_ngcontent-%COMP%]{color:#b1b1b1;margin-right:5px}"]});let n=t;return n})();var Y=[{path:"",component:K}],Z=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=P({type:t}),t.\u0275inj=_({imports:[E.forChild(Y),E]});let n=t;return n})();var G=(()=>{let t=class t{constructor(e){this.productosService=e,this.productRemoved=new v}removeProduct(){this.productosService.removeProduct(this.productId).subscribe(()=>{this.productRemoved.emit()},e=>{console.error("Error removing product",e)})}};t.\u0275fac=function(o){return new(o||t)(f(C))},t.\u0275cmp=g({type:t,selectors:[["app-remove-from-car"]],inputs:{productId:"productId"},outputs:{productRemoved:"productRemoved"},decls:4,vars:0,consts:[["rel","stylesheet","href",R`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css`],[1,"delete-button",3,"click"],[1,"fas","fa-trash-alt"]],template:function(o,a){o&1&&(r(0,"head"),m(1,"link",0),c(),r(2,"button",1),l("click",function(){return a.removeProduct()}),m(3,"i",2),c())},styles:[".delete-button[_ngcontent-%COMP%]{background:transparent;border:none;color:#000;cursor:pointer}.delete-button[_ngcontent-%COMP%]   .fa-trash-alt[_ngcontent-%COMP%]{font-size:1.2em}"]});let n=t;return n})();function $(n,t){if(n&1){let i=A();r(0,"div")(1,"div",5),m(2,"img",6),r(3,"div",7)(4,"p"),p(5),c(),r(6,"p"),p(7),c(),r(8,"app-remove-from-car",8),l("productRemoved",function(){let o=M(i).$implicit,a=h();return O(a.onProductRemoved(o.id))}),c()()()()}if(n&2){let i=t.$implicit;s(2),j("alt",i.nombre),d("src",i.img,y),s(3),u(i.nombre),s(2),u(i.precio),s(),d("productId",i.id)}}var lt=(()=>{let t=class t{constructor(e){this.ProductosService=e,this.shops=[],this.closeCart=new v,this.productCount=new v}ngOnInit(){this.getCarProducts()}getCarProducts(){this.ProductosService.getShops().subscribe(e=>{this.shops=e,this.productCount.emit(this.shops.length)},e=>{console.error("Error fetching cart products",e)})}onProductRemoved(e){this.shops=this.shops.filter(o=>o.id!==e),this.productCount.emit(this.shops.length)}goToCheckout(){window.location.href="homeduenio"}continueShopping(){this.closeCart.emit()}};t.\u0275fac=function(o){return new(o||t)(f(C))},t.\u0275cmp=g({type:t,selectors:[["app-view-to-car"]],outputs:{closeCart:"closeCart",productCount:"productCount"},decls:9,vars:1,consts:[[1,"cart-card"],[4,"ngFor","ngForOf"],[1,"cart-actions"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"cart-item"],[3,"src","alt"],[1,"item-details"],[3,"productRemoved","productId"]],template:function(o,a){o&1&&(r(0,"div",0)(1,"h3"),p(2,"Shopping Cart"),c(),x(3,$,9,5,"div",1),r(4,"div",2)(5,"button",3),l("click",function(){return a.goToCheckout()}),p(6,"Ir a pagar"),c(),r(7,"button",4),l("click",function(){return a.continueShopping()}),p(8,"Continuar comprando"),c()()()),o&2&&(s(3),d("ngForOf",a.shops))},dependencies:[w,G],styles:[".cart-card[_ngcontent-%COMP%]{width:100%;padding:10px;box-sizing:border-box}.cart-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:10px 0;font-size:18px;color:#003049;text-align:center}.cart-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.cart-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;margin-right:10px}.item-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:14px}.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:3px 0}.cart-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.cart-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;padding:10px;border:none;border-radius:5px;cursor:pointer;margin:0 5px;text-align:center}.cart-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#54afb2;color:#fff}.cart-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#ccc;color:#000}.cart-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#003049}.cart-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background-color:#aaa}"]});let n=t;return n})();var Pt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=P({type:t}),t.\u0275inj=_({imports:[U,Z]});let n=t;return n})();export{K as a,lt as b,Pt as c};
